{"mappings":"iiBACA,IAAAA,EAAAC,EAAA,S,aCDAC,EAAAD,EAAA,S,aAAeE,ECAZ,W,sBDAkBC,EACPC,G,IAAEC,EAAFD,EAAEC,SAAUC,EAAZF,EAAYE,S,aACtBC,KAAKC,OAASD,KAAKE,UAAUJ,GACzBC,EAAUC,KAAKG,OACdH,KAAKI,M,iBAGZC,IAAA,Y,MAAA,SAAUP,GACR,OAAOQ,SAASC,cAAcT,E,IAGhCO,IAAA,O,MAAA,WACEL,KAAKC,OAAOO,UAAUC,IAAI,S,IAG5BJ,IAAA,O,MAAA,WACEL,KAAKC,OAAOO,UAAUE,OAAO,S,IAG/BL,IAAA,U,MAAA,WACEL,KAAKC,OAAOU,UAAW,EACvBX,KAAKC,OAAOW,YAAc,Y,IAE5BP,IAAA,S,MAAA,WACEL,KAAKC,OAAOU,UAAW,EACvBX,KAAKC,OAAOW,YAAc,W,OCzB3B,G,aFOGC,EAAO,CACXC,KAAMR,SAASC,cAAc,gBAC7BQ,QAAST,SAASC,cAAc,aAG5BS,EAAoB,IAAI,EAAAC,EAAAC,SACxBC,EAAW,IAAIC,EAAA5B,GAAJ,CAAmB,cAC9B6B,EAAc,IAAI1B,EAAY,CAClCG,SAAU,aACVC,UAAU,IAmBZ,SAASuB,IAGP,OAFAD,EAAYE,UACZF,EAAYjB,OACLY,EACJQ,eACAC,MAAK,SAAAC,GAEJ,OAgEN,SAAsBA,GAGW,IAA3BV,EAAkBW,MACpBP,EAAAQ,GAASC,OAAOC,QAAQ,oBAAkCC,OAAdL,EAAIM,UAAU,aACxDN,EAAIO,KAAKC,OAASlB,EAAkBmB,UACtCd,EAAYlB,OACZiB,EAAAQ,GAASC,OAAOO,QACd,8D,CAzEAC,CAAaX,GACNA,EAAIO,I,IAEZR,KAAKa,GACLC,MAAMC,GACNC,SAAQ,WACP5B,EAAKC,KAAK4B,QAEVrB,EAAYsB,Q,IAKlB,SAASL,EAAaM,GACpB,IAAIC,EACJA,EAASD,EACNE,KACC,SAAAjD,G,IACEkD,EAAYlD,EAAZkD,aACAC,EAAanD,EAAbmD,cACAC,EAAIpD,EAAJoD,KACAC,EAAKrD,EAALqD,MACAC,EAAKtD,EAALsD,MACAC,EAAQvD,EAARuD,SACAC,EAASxD,EAATwD,UAEA,MAAO,kCAEsBtB,OAFYiB,EAAc,6EAEJjB,OAAtBgB,EAAa,WAG7BhB,OAHsCkB,EAAK,6FAM3ClB,OAHAmB,EAAM,8DAMHnB,OAHHoB,EAAM,iEAMFpB,OAHDqB,EAAS,kEAGErB,OAAVsB,EAAU,mC,IAM9BC,KAAK,IAERzC,EAAKE,QAAQwC,mBAAmB,YAAaV,GAC7C1B,EAASqC,S,CAOX,SAAShB,EAAQiB,GACfC,QAAQC,IAAIF,GACZrC,EAAAQ,GAASC,OAAO+B,QACd,4EAGFvC,EAAYlB,M,CApFdU,EAAKC,KAAK+C,iBAAiB,UAG3B,SAAkBC,GAChBA,EAAIC,iBACJ/C,EAAkBgD,EAAIF,EAAIG,cAAcC,SAASC,YAAYC,MAAMC,OAGnEhD,EAAYjB,OACZY,EAAkBsD,YAkElBzD,EAAKE,QAAQwD,UAAY,GAhEzBjD,G,IAVFD,EAAYpB,OAAO4D,iBAAiB,QAASvC,E","sources":["src/01-index.js","src/components/load-more-btn.js","<<jsx-config-pragma.js>>"],"sourcesContent":["\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport GalleryAPIServise from './fetchGallery'\nimport LoadMoreBtn from './components/load-more-btn'\nimport Notiflix from 'notiflix';\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n};\n\nconst galleryAPIServise = new GalleryAPIServise()\nconst lightbox = new simpleLightbox('.gallery a');\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: '.load-more',\n  isHidden: true,\n});\n\nrefs.form.addEventListener('submit', onSearch);\nloadMoreBtn.button.addEventListener('click', fetchImg);\n\nfunction onSearch(evt) {\n  evt.preventDefault();\n  galleryAPIServise.q = evt.currentTarget.elements.searchQuery.value.trim();\n  // console.log(galleryAPIServise.q);\n\n  loadMoreBtn.show();\n  galleryAPIServise.resetPage()\n  clearGallery();\n  fetchImg();\n  \n \n}\n\nfunction fetchImg() {\n  loadMoreBtn.disable();\n  loadMoreBtn.show();\n  return galleryAPIServise\n    .fetchGallery()\n    .then(res => {\n      notification(res);\n      return res.hits\n    })\n    .then(createMarkup)\n    .catch(OnError)\n    .finally(() => {\n      refs.form.reset();\n      \n      loadMoreBtn.enable();\n      \n    });\n}\n\nfunction createMarkup(images) {\n  let markup = '';\n  markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<a class=\"gallery__item\" href=\"${largeImageURL}\">\n        <div class=\"photo-card\">\n  <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes </b>${likes}\n    </p>\n    <p class=\"info-item\">\n      <b>Views </b>${views}\n    </p>\n    <p class=\"info-item\">\n      <b>Comments </b>${comments}\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads </b>${downloads}\n    </p>\n  </div>\n</div></a>`;\n      }\n    )\n    .join('');\n  // console.log(markup);\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nfunction clearGallery() {\n  refs.gallery.innerHTML = '';\n}\n\nfunction OnError(error) {\n  console.log(error);\n  Notiflix.Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.'\n  );\n  \n  loadMoreBtn.hide();\n}\n\nfunction notification(res) {\n  // console.log(\"ðŸš€  ~ res\", res)\n  // console.log('res.hits.length', res.hits.length);\n  if (galleryAPIServise.page === 2)\n    Notiflix.Notify.success(`Hooray! We found ${res.totalHits} images.`); \n  if (res.hits.length < galleryAPIServise.perPage) {\n    loadMoreBtn.hide();\n    Notiflix.Notify.warning(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  } \n  }\n\n\n\n\n\n\n","export default class LoadMoreBtn {\n  constructor({ selector, isHidden }) {\n    this.button = this.getButton(selector);\n    if (isHidden) this.hide();\n    else this.show();\n  }\n\n  getButton(selector) {\n    return document.querySelector(selector);\n  }\n\n  hide() {\n    this.button.classList.add('hidden');\n  }\n\n  show() {\n    this.button.classList.remove('hidden');\n  }\n\n  disable() {\n    this.button.disabled = true;\n    this.button.textContent = 'Loading...';\n  }\n  enable() {\n    this.button.disabled = false;\n    this.button.textContent = 'Load more';\n  }\n}\n",null],"names":["$5IjG7","parcelRequire","$8MBJY","$0d0125f8f35bd11a$export$2e2bcd8739ae039","LoadMoreBtn","param","selector","isHidden","this","button","getButton","hide","show","key","document","querySelector","classList","add","remove","disabled","textContent","$07eb150d622544d8$var$refs","form","gallery","$07eb150d622544d8$var$galleryAPIServise","$34OZX","default","$07eb150d622544d8$var$lightbox","$parcel$interopDefault","$07eb150d622544d8$var$loadMoreBtn","$07eb150d622544d8$var$fetchImg","disable","fetchGallery","then","res","page","$6JpON","Notify","success","concat","totalHits","hits","length","perPage","warning","$07eb150d622544d8$var$notification","$07eb150d622544d8$var$createMarkup","catch","$07eb150d622544d8$var$OnError","finally","reset","enable","images","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","refresh","error","console","log","failure","addEventListener","evt","preventDefault","q","currentTarget","elements","searchQuery","value","trim","resetPage","innerHTML"],"version":3,"file":"01-loadMoreBtn.6b679581.js.map"}