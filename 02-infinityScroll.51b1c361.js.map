{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BAKMC,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,YAChCE,MAAOH,SAASC,cAAc,cAG1BG,EAAoB,IAAI,EAAAC,EAAAC,SACxBC,EAAW,IAAIC,EAAAZ,GAAJ,CAAmB,cAcpC,SAASa,IACP,OAAOL,EACJM,eACAC,MAAK,SAAAC,GAGJ,OAFEC,EAASC,QAAQhB,EAAKK,OAuE9B,SAAsBS,GAEW,IAA3BR,EAAkBW,KACpBP,EAAAQ,GAASC,OAAOC,QAAQ,oBAAkCC,OAAdP,EAAIQ,UAAU,aAClDR,EAAIS,KAAKC,OAASlB,EAAkBmB,UAC5CV,EAASW,UAAU1B,EAAKK,OACxBK,EAAAQ,GAASC,OAAOQ,QACd,8D,CA7EEC,CAAad,GACRA,EAAIS,I,IAEZV,KAAKgB,GACLC,MAAMC,GACNC,SAAQ,WACPhC,EAAKC,KAAKgC,O,IAIhB,SAASJ,EAAaK,GACpB,IAAIC,EACJA,EAASD,EACNE,KACC,SAAAC,G,IACEC,EAAYD,EAAZC,aACAC,EAAaF,EAAbE,cACAC,EAAIH,EAAJG,KACAC,EAAKJ,EAALI,MACAC,EAAKL,EAALK,MACAC,EAAQN,EAARM,SACAC,EAASP,EAATO,UAEA,MAAO,kCAEsBvB,OAFYkB,EAAc,6EAEJlB,OAAtBiB,EAAa,WAG7BjB,OAHsCmB,EAAK,6FAM3CnB,OAHAoB,EAAM,8DAMHpB,OAHHqB,EAAM,iEAMFrB,OAHDsB,EAAS,kEAGEtB,OAAVuB,EAAU,mC,IAM9BC,KAAK,IAER7C,EAAKI,QAAQ0C,mBAAmB,YAAaX,GAE3C1B,EAASsC,S,CAab,SAAShB,EAAQiB,GAEbjC,EAASW,UAAU1B,EAAKK,OAC1BK,EAAAQ,GAASC,OAAO8B,QACd,2E,CAjFJjD,EAAKC,KAAKiD,iBAAiB,UAE3B,SAAkBC,GAChBA,EAAIC,iBACJ9C,EAAkB+C,EAAIF,EAAIG,cAAcC,SAASC,YAAYC,MAAMC,OAEnEpD,EAAkBqD,YAoElB3D,EAAKI,QAAQwD,UAAY,GAjEzBjD,G,IA+FF,IAIMI,EAAW,IAAI8C,sBAErB,SAAgBC,GACZC,QAAQC,IAAIF,GACdA,EAASG,SAAQ,SAAAC,GACfH,QAAQC,IAAI,uBAAwBE,EAAMC,gBACpCD,EAAMC,gBACRxD,G,MAXO,CACbyD,KAAM,KACNC,WAAY,S","sources":["src/02-index.js"],"sourcesContent":["import simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport GalleryAPIServise from './fetchGallery';\nimport Notiflix from 'notiflix';\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  guard: document.querySelector('.js-guard'),\n};\n\nconst galleryAPIServise = new GalleryAPIServise();\nconst lightbox = new simpleLightbox('.gallery a');\n\nrefs.form.addEventListener('submit', onSearch);\n\nfunction onSearch(evt) {\n  evt.preventDefault();\n  galleryAPIServise.q = evt.currentTarget.elements.searchQuery.value.trim();\n//   console.log(galleryAPIServise.q);\n  galleryAPIServise.resetPage();\n//   galleryAPIServise.resetShownImg();\n  clearGallery();\n  fetchImg();\n}\n\nfunction fetchImg() {\n  return galleryAPIServise\n    .fetchGallery()\n    .then(res => {\n        observer.observe(refs.guard);\n        notification(res);\n      return res.hits;\n    })\n    .then(createMarkup)\n    .catch(OnError)\n    .finally(() => {\n      refs.form.reset();\n    });\n}\n\nfunction createMarkup(images) {\n  let markup = '';\n  markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<a class=\"gallery__item\" href=\"${largeImageURL}\">\n        <div class=\"photo-card\">\n  <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes </b>${likes}\n    </p>\n    <p class=\"info-item\">\n      <b>Views </b>${views}\n    </p>\n    <p class=\"info-item\">\n      <b>Comments </b>${comments}\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads </b>${downloads}\n    </p>\n  </div>\n</div></a>`;\n      }\n    )\n    .join('');\n  \n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  \n    lightbox.refresh();\n\n    // const { height: cardHeight } = document\n    //   .querySelector('.gallery')\n    //   .firstElementChild.getBoundingClientRect();\n\n\n}\n\nfunction clearGallery() {\n  refs.gallery.innerHTML = '';\n}\n\nfunction OnError(error) {\n//   console.log(error);\n    observer.unobserve(refs.guard);\n  Notiflix.Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.'\n  );\n\n\n}\n\nfunction notification(res) {\n    // console.log('ðŸš€ ~ isContentFinished ~ res', res);\n  if (galleryAPIServise.page === 2)\n    Notiflix.Notify.success(`Hooray! We found ${res.totalHits} images.`);\n   else if (res.hits.length < galleryAPIServise.perPage) {\n    observer.unobserve(refs.guard);\n    Notiflix.Notify.warning(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  }\n    // console.log(\n    //   'galleryAPIServise.shownImg',\n    //   res.totalHits - galleryAPIServise.shownImg\n    // );\n    \n}\n\nconst detals = {\n  root: null,\n  rootMargin: '300px',\n};\nconst observer = new IntersectionObserver(onload, detals);\n\nfunction onload(enteries) {\n    console.log(enteries);\n  enteries.forEach(entry => {\n    console.log('entry.isIntersecting', entry.isIntersecting);\n      if (entry.isIntersecting) {\n        fetchImg()\n    }\n  });\n}\n\n\n// const { height: cardHeight } = document\n//   .querySelector('.gallery')\n//   .firstElementChild.getBoundingClientRect();\n// // console.log(cardHeight);\n\n// window.scrollBy({\n//   top: cardHeight * 2,\n//   behavior: 'smooth',\n// });"],"names":["$5IjG7","parcelRequire","$11e807edb1765eef$var$refs","form","document","querySelector","gallery","guard","$11e807edb1765eef$var$galleryAPIServise","$34OZX","default","$11e807edb1765eef$var$lightbox","$parcel$interopDefault","$11e807edb1765eef$var$fetchImg","fetchGallery","then","res","$11e807edb1765eef$var$observer","observe","page","$6JpON","Notify","success","concat","totalHits","hits","length","perPage","unobserve","warning","$11e807edb1765eef$var$notification","$11e807edb1765eef$var$createMarkup","catch","$11e807edb1765eef$var$OnError","finally","reset","images","markup","map","param","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","refresh","error","failure","addEventListener","evt","preventDefault","q","currentTarget","elements","searchQuery","value","trim","resetPage","innerHTML","IntersectionObserver","enteries","console","log","forEach","entry","isIntersecting","root","rootMargin"],"version":3,"file":"02-infinityScroll.51b1c361.js.map"}