{"mappings":"qhBACA,IAAAA,EAAAC,EAAA,S,8BAMA,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,aAG5BE,EAAoB,IAAI,EAAAC,EAAAC,SACxBC,EAAW,IAAIC,EAAAX,GAAJ,CAAmB,cAC9BY,EAAc,ICdL,MAObC,UAAUC,GACR,OAAOV,SAASC,cAAcS,E,CAGhCC,OACEC,KAAKC,OAAOC,UAAUC,IAAI,S,CAG5BC,OACEJ,KAAKC,OAAOC,UAAUG,OAAO,S,CAG/BC,UACEN,KAAKC,OAAOM,UAAW,EACvBP,KAAKC,OAAOO,YAAc,Y,CAE5BC,SACET,KAAKC,OAAOM,UAAW,EACvBP,KAAKC,OAAOO,YAAc,W,CAxB5BE,aAAYZ,SAAEA,EAAQa,SAAEA,IACtBX,KAAKC,OAASD,KAAKH,UAAUC,GACzBa,EAAUX,KAAKD,OACdC,KAAKI,M,GDUsB,CAClCN,SAAU,aACVa,UAAU,IAmBZ,SAASC,IAGP,OAFAhB,EAAYU,UACZV,EAAYQ,OACLb,EACJsB,eACAC,MAAKC,IAkEV,SAAsBA,GACpBC,QAAQC,IAAI,+BAA+BF,GAC3CC,QAAQC,IAAI,kBAAmBF,EAAIG,KAAKC,QACT,IAA3B5B,EAAkB6B,MACpBzB,EAAA0B,GAASC,OAAOC,QAAQ,oBAAoBR,EAAIS,qBAC9CT,EAAIG,KAAKC,OAAS5B,EAAkBkC,UACtC7B,EAAYG,OACZJ,EAAA0B,GAASC,OAAOI,QACd,8D,CAzEAC,CAAaZ,GACNA,EAAIG,QAEZJ,KAAKc,GACLC,MAAMC,GACNC,SAAQ,KACP7C,EAAKC,KAAK6C,QAEVpC,EAAYa,QAAQ,G,CAK1B,SAASmB,EAAaK,GACpB,IAAIC,EAAS,GACbA,EAASD,EACNE,KACC,EAACC,aACCA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAEO,kCAAkCL,6EAEZD,WAAsBE,6FAGtCC,8DAGAC,iEAGGC,kEAGCC,sCAMpBC,KAAK,IAERzD,EAAKI,QAAQsD,mBAAmB,YAAaV,GAC7CxC,EAASmD,S,CAOX,SAASf,EAAQgB,GACf9B,QAAQC,IAAI6B,GACZnD,EAAA0B,GAASC,OAAOyB,QACd,4EAGFnD,EAAYG,M,CApFdb,EAAKC,KAAK6D,iBAAiB,UAG3B,SAAkBC,GAChBA,EAAIC,iBACJ3D,EAAkB4D,EAAIF,EAAIG,cAAcC,SAASC,YAAYC,MAAMC,OAGnE5D,EAAYQ,OACZb,EAAkBkE,YAkElBvE,EAAKI,QAAQoE,UAAY,GAhEzB9C,G,IAVFhB,EAAYK,OAAO+C,iBAAiB,QAASpC","sources":["src/01-index.js","src/components/load-more-btn.js"],"sourcesContent":["\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport GalleryAPIServise from './fetchGallery'\nimport LoadMoreBtn from './components/load-more-btn'\nimport Notiflix from 'notiflix';\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n};\n\nconst galleryAPIServise = new GalleryAPIServise()\nconst lightbox = new simpleLightbox('.gallery a');\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: '.load-more',\n  isHidden: true,\n});\n\nrefs.form.addEventListener('submit', onSearch);\nloadMoreBtn.button.addEventListener('click', fetchImg);\n\nfunction onSearch(evt) {\n  evt.preventDefault();\n  galleryAPIServise.q = evt.currentTarget.elements.searchQuery.value.trim();\n  // console.log(galleryAPIServise.q);\n\n  loadMoreBtn.show();\n  galleryAPIServise.resetPage()\n  clearGallery();\n  fetchImg();\n  \n \n}\n\nfunction fetchImg() {\n  loadMoreBtn.disable();\n  loadMoreBtn.show();\n  return galleryAPIServise\n    .fetchGallery()\n    .then(res => {\n      notification(res);\n      return res.hits\n    })\n    .then(createMarkup)\n    .catch(OnError)\n    .finally(() => {\n      refs.form.reset();\n      \n      loadMoreBtn.enable();\n      \n    });\n}\n\nfunction createMarkup(images) {\n  let markup = '';\n  markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<a class=\"gallery__item\" href=\"${largeImageURL}\">\n        <div class=\"photo-card\">\n  <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes </b>${likes}\n    </p>\n    <p class=\"info-item\">\n      <b>Views </b>${views}\n    </p>\n    <p class=\"info-item\">\n      <b>Comments </b>${comments}\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads </b>${downloads}\n    </p>\n  </div>\n</div></a>`;\n      }\n    )\n    .join('');\n  // console.log(markup);\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nfunction clearGallery() {\n  refs.gallery.innerHTML = '';\n}\n\nfunction OnError(error) {\n  console.log(error);\n  Notiflix.Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.'\n  );\n  \n  loadMoreBtn.hide();\n}\n\nfunction notification(res) {\n  console.log(\"ðŸš€ ~ isContentFinished ~ res\", res)\n  console.log('res.hits.length', res.hits.length);\n  if (galleryAPIServise.page === 2)\n    Notiflix.Notify.success(`Hooray! We found ${res.totalHits} images.`); \n  if (res.hits.length < galleryAPIServise.perPage) {\n    loadMoreBtn.hide();\n    Notiflix.Notify.warning(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  } \n  }\n\n\n\n\n\n\n","export default class LoadMoreBtn {\n  constructor({ selector, isHidden }) {\n    this.button = this.getButton(selector);\n    if (isHidden) this.hide();\n    else this.show();\n  }\n\n  getButton(selector) {\n    return document.querySelector(selector);\n  }\n\n  hide() {\n    this.button.classList.add('hidden');\n  }\n\n  show() {\n    this.button.classList.remove('hidden');\n  }\n\n  disable() {\n    this.button.disabled = true;\n    this.button.textContent = 'Loading...';\n  }\n  enable() {\n    this.button.disabled = false;\n    this.button.textContent = 'Load more';\n  }\n}\n"],"names":["$fZKcF","parcelRequire","$75c9065a99106def$var$refs","form","document","querySelector","gallery","$75c9065a99106def$var$galleryAPIServise","$5xtEq","default","$75c9065a99106def$var$lightbox","$parcel$interopDefault","$75c9065a99106def$var$loadMoreBtn","getButton","selector","hide","this","button","classList","add","show","remove","disable","disabled","textContent","enable","constructor","isHidden","$75c9065a99106def$var$fetchImg","fetchGallery","then","res","console","log","hits","length","page","$7Y9D8","Notify","success","totalHits","perPage","warning","$75c9065a99106def$var$notification","$75c9065a99106def$var$createMarkup","catch","$75c9065a99106def$var$OnError","finally","reset","images","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","refresh","error","failure","addEventListener","evt","preventDefault","q","currentTarget","elements","searchQuery","value","trim","resetPage","innerHTML"],"version":3,"file":"01-loadMoreBtn.3b34876b.js.map"}